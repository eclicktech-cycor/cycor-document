---
sidebar_position: 2
---

prometheus-operator 版本： v0.42.1 （为后期兼容kubesphere 3.1）

prometheus 版本：V2.26.0 （关联operator版本）

配置中需要修改的部分：

```yaml
  # 集群识别符
  externalLabels:
    cluster: intranet-dev
  # 本地prometheus不压缩数据  
  disableCompaction: true
  # 远程写配置
  remoteWrite:
  - queueConfig:
      batchSendDeadline: 5s
      capacity: 1000
      maxBackoff: 100ms
      maxSamplesPerSend: 100
      maxShards: 500
      minBackoff: 30ms
      minShards: 1
    remoteTimeout: 30s
    url: http://10.100.135.56:19291/api/v1/receive/
	alerting:
		alertmanagers:
		- name: alertmanager-main
		  namespace: monitoring
		  port: web

```

url: 'http://172.30.176.11:30502/api/v1/receive/'

```
kubectl delete deployment prometheus-operator -n default
kubectl delete deployment grafana -n default
kubectl delete deployment alertmanager -n kube-system
kubectl delete ns monitor-ali-fra
kubectl delete ds node-exporter -n kube-system
kubectl delete --ignore-not-found customresourcedefinitions \
  prometheuses.monitoring.coreos.com \
  servicemonitors.monitoring.coreos.com \
  podmonitors.monitoring.coreos.com \
  alertmanagers.monitoring.coreos.com \
  prometheusrules.monitoring.coreos.com
  
kubectl create clusterrolebinding prometheus-admin-binding --clusterrole=cluster-admin --user=system:serviceaccount:monitoring:prometheus-k8s
```



deducted by cash coupons 0
deducted by prepaid card 0
invoice discount 82.31
list price -1 
outstanding amount 35.28
payent amount  0
pretax amount 35.28
pretax gross amount 117.5
用现金券扣除 0
预付卡扣除 0
发票折扣 82.31
标价-1
未偿金额 35.28
支付金额 0
税前金额 35.28
税前总额 117.5